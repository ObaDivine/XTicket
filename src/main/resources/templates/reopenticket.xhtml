<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head>
        <title>X-Ticket - Reopen</title>
        <th:block th:include="~{fragments/ngxTicketFragments :: headerfiles}"></th:block>
    </head>
    <body onload="preloaderFunction()" style="margin: 0;">
        <div id="loader"></div>
        <main class="main animate-bottom" id="top" style="display:none;">
            <div class="container-fluid px-0">
                <th:block th:include="~{fragments/ngxTicketFragments :: leftMenu}"></th:block>
                <th:block th:include="~{fragments/ngxTicketFragments :: topMenu}"></th:block>
                <div class="content">
                    <div class="row gy-3 mb-6 justify-content-between">
                        <div class="col-md-9 col-auto" th:switch="${policyType}">                           
                            <h4 class="mb-2 text-1100 text-primary" th:case="POL">Policy Listing</h4>
                            <h5 class="text-700 fw-semi-bold" th:case="POL">Policies &amp; Standard Operating Procedures</h5>
                            <h4 class="mb-2 text-1100 text-primary" th:case="SOP">Standard Operating Procedure Listing</h4>
                            <h5 class="text-700 fw-semi-bold" th:case="SOP">Standard Operating Procedures</h5>
                            <h4 class="mb-2 text-1100 text-primary" th:case="CHT">Charters Listing</h4>
                            <h5 class="text-700 fw-semi-bold" th:case="CHT">Charters</h5>
                            <h4 class="mb-2 text-1100 text-primary" th:case="COM">Committees &amp; Association Listing</h4>
                            <h5 class="text-700 fw-semi-bold" th:case="COM">Committees &mp; Association</h5>
                            <h4 class="mb-2 text-1100 text-primary" th:case="FRM">Forms Listing</h4>
                            <h5 class="text-700 fw-semi-bold" th:case="FRM">Forms</h5>
                            <h4 class="mb-2 text-1100 text-primary" th:case="SCH">Schedule Listing</h4>
                            <h5 class="text-700 fw-semi-bold" th:case="SCH">Schedule</h5>
                            <h4 class="mb-2 text-1100 text-primary" th:case="RPT">Report Listing</h4>
                            <h5 class="text-700 fw-semi-bold" th:case="RPT">Report</h5>
                            <h4 class="mb-2 text-1100 text-primary" th:case="TEM">Templates Listing</h4>
                            <h5 class="text-700 fw-semi-bold" th:case="TEM">Templates</h5>
                        </div>
                        <div class="col-md-3 col-auto">
                            <h4 class="mb-2 text-1100 text-primary" th:text="'Welcome ' + ${principalName}">Welcome Brian</h4>
                        </div>
                    </div>
                    <div class="row mb-3 gy-6">
                        <div id="dealsTable" data-list='{"valueNames":["policy","policycode","company","lastReview","fileSize","underReview"],"page":10,"pagination":true}'>
                            <div class="row g-3 justify-content-between mb-4">
                                <div class="col-auto">
                                    <div class="d-md-flex justify-content-between">
                                        <div>  </div>
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="d-flex">
                                        <div class="search-box me-2">
                                            <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                                                <input class="form-control search-input search" type="search" placeholder="Search by name" aria-label="Search" />
                                                <span class="fas fa-search search-box-icon"></span>
                                            </form>
                                        </div>
                                        <button class="btn px-3 btn-phoenix-secondary" type="button" data-bs-toggle="modal" data-bs-target="#policyModal" aria-expanded="false" th:onclick="|setPolicy('POL')|" data-boundary="window" aria-haspopup="true" data-bs-reference="parent">
                                            <span class="fa-solid fa-filter text-primary" data-fa-transform="down-3"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="px-4 mx-lg-n6 px-lg-6">
                                <div class="table-responsive scrollbar mx-n1 px-1 border-top">
                                    <table class="table table-sm fs--1 mb-0 leads-table">
                                        <thead>
                                            <tr>
                                                <th class="sort white-space-nowrap align-middle text-capitalize" scope="col" data-sort="policy" style="width:45%;">Policy Name</th>
                                                <th class="sort white-space-nowrap align-middle text-capitalize" scope="col" data-sort="policycode" style="width:9%;">Reference Code</th>
                                                <th class="sort align-middle ps-4 pe-5 text-capitalize border-end" scope="col" data-sort="company" style="width:19%; min-width: 180px;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-primary-100 rounded me-2">
                                                            <span class="text-primary-600 dark__text-primary-300" data-feather="aperture"></span>
                                                        </div>
                                                        <span>Company</span>
                                                    </div>
                                                </th>
                                                <th class="sort text-end pe-5 ps-4" scope="col" data-sort="lastReview" style="width:9%;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-warning-100 rounded me-2">
                                                            <span class="text-warning-600 dark__text-warning-300" data-feather="calendar"></span>
                                                        </div>
                                                        <span>Last Review</span>
                                                    </div>
                                                </th>
                                                <th class="sort text-end pe-5 ps-4" scope="col"  data-sort="fileSize" style="width:9%;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-warning-100 rounded me-2">
                                                            <span class="text-warning-600 dark__text-warning-300" data-feather="file"></span>
                                                        </div>
                                                        <span>File Size</span>
                                                    </div>
                                                </th>
                                                <th class="sort text-end pe-5 ps-4" scope="col"  data-sort="underReview" style="width:9%;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-warning-100 rounded me-2">
                                                            <span class="text-warning-600 dark__text-warning-300" data-feather="edit"></span>
                                                        </div>
                                                        <span>Under Review</span>
                                                    </div>
                                                </th>
                                                <th class="sort text-end align-middle pe-0 ps-4" scope="col">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody class="list" id="deal-tables-body">
                                            <tr class="hover-actions-trigger btn-reveal-trigger position-static" th:each="rec : ${policyList}">
                                                <td class="policy align-middle white-space-nowrap">
                                                    <div class="d-flex align-items-center">
                                                        <div class="avatar avatar-xl me-3">
                                                            <span th:if="${rec.policyType.policyTypeCode == 'POL'}" class="fa fa-th-list text-primary">XPolicy</span>
                                                            <span th:if="${rec.policyType.policyTypeCode == 'SOP'}" class="fa fa-tags text-primary">XPolicy</span>
                                                            <span th:if="${rec.policyType.policyTypeCode == 'CHT'}" class="fa fa-stream text-primary">XPolicy</span>
                                                            <span th:if="${rec.policyType.policyTypeCode == 'PRO'}" class="fa fa-procedures text-primary">XPolicy</span>
                                                            <span th:if="${rec.policyType.policyTypeCode == 'FWK'}" class="fa fa-th text-primary">XPolicy</span>
                                                            <span th:if="${rec.policyType.policyTypeCode == 'FRM'}" class="fa fa-tags text-primary">XPolicy</span>
                                                            <span th:if="${rec.policyType.policyTypeCode == 'STD'}" class="fa fa-align-justify text-primary">XPolicy</span>
                                                            <span th:if="${rec.policyType.policyTypeCode == 'SCH'}" class="fa fa-calendar text-primary">XPolicy</span>
                                                            <span th:if="${rec.policyType.policyTypeCode == 'RPT'}" class="fa fa-chart-bar text-primary">XPolicy</span>
                                                        </div>
                                                        <div>
                                                            <a class="fs-0 fw-bold text-capitalize" href="#!" th:href="@{'/policy/download/' + ${rec.policyDocumentId} + '.' + ${rec.policyDocumentExt}}" target="_blank" th:text="${rec.policyName}">Download</a>
                                                            <div class="d-flex align-items-center">
                                                                <a class="fs-0 fw-bold" href="#!" th:href="@{'/policy/download/' + ${rec.policyDocumentId} + '.' + ${rec.policyDocumentExt}}" target="_blank">
                                                                    <p class="mb-0 text-1000 fw-semi-bold fs--1 me-2">View Policy</p>
                                                                </a>
                                                                <a type="button" href="" class="fs-0 fw-bold" th:onclick="|fetchPolicyDetails([[${rec.id}]])|" data-todo-offcanvas-toogle="data-todo-offcanvas-toogle" data-todo-offcanvas-target="#offcanvasRight" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
                                                                    <p class="mb-0 text-1000 fw-semi-bold fs--1 me-2" >View Policy Details</p>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="policycode align-middle white-space-nowrap fw-semi-bold text-1000 ps-4 border-end" th:text="${rec.policyCode}">Entity</td>
                                                <td class="company align-middle white-space-nowrap fw-semi-bold text-1000 ps-4 border-end" th:text="${rec.company.companyName}">Entity</td>
                                                <td class="lastReview align-middle white-space-nowrap text-600 ps-4 border-end fw-semi-bold text-1000" th:text="${rec.lastReview}">Last review</td>
                                                <td class="fileSize align-middle white-space-nowrap text-600 ps-4 border-end fw-semi-bold text-1000" th:text="${rec.fileSize}">File Size</td>
                                                <td class="underReview align-middle white-space-nowrap text-600 ps-4 border-end fw-semi-bold text-1000" th:text="${rec.underReview}">Under review</td>
                                                <td class="align-middle white-space-nowrap text-end pe-0 ps-4">
                                                    <div class="font-sans-serif btn-reveal-trigger position-static">
                                                        <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2" type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true" aria-expanded="false" data-bs-reference="parent"><span class="fas fa-ellipsis-h fs--2"></span></button>
                                                        <div class="dropdown-menu dropdown-menu-end py-2">
                                                            <a class="dropdown-item" href="#!" th:href="@{'/policy/download/' + ${rec.policyDocumentId} + '.' + ${rec.policyDocumentExt}}" target="_blank">View</a>
                                                            <a class="dropdown-item" href="#!"  th:onclick="|fetchPolicyDetails([[${rec.id}]])|" data-todo-offcanvas-toogle="data-todo-offcanvas-toogle" data-todo-offcanvas-target="#offcanvasRight" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">Details</a>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="row align-items-center justify-content-end py-4 pe-0 fs--1">
                                    <div class="col-auto d-flex">
                                        <p class="mb-0 d-none d-sm-block me-3 fw-semi-bold text-900" data-list-info="data-list-info"></p>
                                        <a class="fw-semi-bold" href="#!" data-list-view="*">View all
                                            <span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
                                        </a>
                                        <a class="fw-semi-bold d-none" href="#!" data-list-view="less">View Less
                                            <span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
                                        </a>
                                    </div>
                                    <div class="col-auto d-flex">
                                        <button class="page-link" data-list-pagination="prev"><span class="fas fa-chevron-left"></span></button>
                                        <ul class="mb-0 pagination"></ul>
                                        <button class="page-link pe-0" data-list-pagination="next"><span class="fas fa-chevron-right"></span></button>
                                    </div>
                                </div>
                                <div class="offcanvas offcanvas-end content-offcanvas offcanvas-backdrop-transparent border-start border-300 shadow-none bg-100" tabindex="-1" data-todo-content-offcanvas="data-todo-content-offcanvas" id="offcanvasRight">
                                    <div class="offcanvas-header">
                                        <h5 id="offcanvasRightLabel" class="text-primary">NGX X-Policy Repository</h5>
                                        <button class="btn-close text-reset" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                                    </div>
                                    <div class="offcanvas-body p-0">
                                        <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 row-cols-xxl-4 g-3 mb-9">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <div class="card h-100 hover-actions-trigger">
                                                    <div class="card-body">
                                                        <div class="d-flex align-items-center">
                                                            <h4 class="mb-2 line-clamp-1 lh-sm flex-1 me-5 text-secondary" id="policyDetailsName"></h4>
                                                        </div>
                                                        <div class="d-flex align-items-center mb-2"><span class="fa-solid fa-file-code me-2 text-500 fs--1 fw-extra-bold"></span>
                                                            <p class="mb-0 fw-bold fs--1">Reference Code : <span class="fw-semi-bold text-500 ms-1 text-primary" id="policyDetailsCode"></span></p>
                                                        </div>
                                                        <div class="d-flex align-items-center mb-2"><span class="fa-solid fa-barcode me-2 text-500 fs--1 fw-extra-bold"></span>
                                                            <p class="mb-0 fw-bold fs--1">Document Id : <span class="fw-semi-bold text-500 ms-1 text-primary" id="policyDetailsDocumentId"></span></p>
                                                        </div>
                                                        <div class="d-flex align-items-center mb-2"><span class="fa-solid fa-sticky-note me-2 text-500 fs--1 fw-extra-bold"></span>
                                                            <p class="mb-0 fw-bold fs--1">Description : <span class="fw-semi-bold text-500 ms-1 text-primary" id="policyDetailsDescription"></span></p>
                                                        </div>                           
                                                        <div class="d-flex align-items-center mb-2"><span class="fa-solid fa-building me-2 text-500 fs--1 fw-extra-bold"></span>
                                                            <p class="mb-0 fw-bold fs--1">Company : <span class="fw-semi-bold text-500 ms-1 text-primary" id="policyDetailsCompany"></span></p>
                                                        </div>
                                                        <div class="d-flex align-items-center mb-2"><span class="fa-solid fa-warehouse me-2 text-500 fs--1 fw-extra-bold"></span>
                                                            <p class="mb-0 fw-bold fs--1">Division : <span class="fw-semi-bold text-500 ms-1 text-primary" id="policyDetailsDivision"></span></p>
                                                        </div>
                                                        <div class="d-flex align-items-center mb-2"><span class="fa-solid fa-university me-2 text-500 fs--1 fw-extra-bold"></span>
                                                            <p class="mb-0 fw-bold fs--1">Department : <span class="fw-semi-bold text-500 ms-1 text-primary" id="policyDetailsDepartment"></span></p>
                                                        </div>
                                                        <div class="d-flex align-items-center mb-4"><span class="fa-solid fa-at me-2 text-500 fs--1 fw-extra-bold"></span>
                                                            <p class="mb-0 fw-bold fs--1">Author : <span class="fw-semi-bold text-500 ms-1 text-primary" id="policyDetailsAuthor"></span></p>
                                                        </div>
                                                        <div class="d-flex justify-content-between text-500 fw-semi-bold">
                                                            <p class="mb-2"> Days since last review</p>
                                                            <p class="mb-2 text-1100" id="daysSinceLastReview"></p>
                                                        </div>
                                                        <div class="progress bg-success-100">
                                                            <div class="progress-bar rounded bg-success" role="progressbar" aria-label="Success example" style="width: 100%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                                        </div>
                                                        <div class="d-flex align-items-center mt-4">
                                                            <p class="mb-0 fw-bold fs--1">Last Review :<span class="fw-semi-bold text-500 ms-1 text-primary" id="policyDetailsLastReview"></span></p>
                                                        </div>
                                                        <div class="d-flex align-items-center mt-2">
                                                            <p class="mb-0 fw-bold fs--1">Expiry Date : <span class="fw-semi-bold text-500 ms-1 text-primary" id="policyDetailsExpiryDate"></span></p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <th:block th:include="~{fragments/ngxTicketFragments :: footer}"></th:block>
                </div>
            </div>            
        </main>
        <th:block th:include="~{fragments/ngxTicketFragments :: scriptfiles}"></th:block>
    </body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head>
        <title>X-Policy - User Report</title>
        <th:block th:include="~{fragments/entityscFragments :: headerfiles}"></th:block>
    </head>
    <body onload="preloaderFunction()" style="margin: 0;">
        <div id="loader"></div>
        <main class="main animate-bottom" id="top" style="display:none;">
            <div class="container-fluid px-0">
                <th:block th:include="~{fragments/entityscFragments :: leftMenu}"></th:block>
                <th:block th:include="~{fragments/entityscFragments :: topMenu}"></th:block>
                <div class="content">
                    <div class="row gy-3 mb-6 justify-content-between">
                        <div class="col-md-9 col-auto">                           
                            <h4 class="mb-2 text-1100 text-primary">User Report</h4>
                            <h5 class="text-700 fw-semi-bold">Generate User Report</h5>                           
                        </div>
                        <div class="col-md-3 col-auto">
                            <h4 class="mb-2 text-1100 text-primary" th:text="'Welcome ' + ${principalName}">Welcome Brian</h4>
                        </div>
                    </div>
                    <div class="row mb-3 gy-6">
                        <div id="dealsTable" data-list='{"valueNames":["email","username","company","division", "department","policyChampion","accesslevel","datecreated","role"],"page":10,"pagination":true}'>
                            <div class="row g-3 justify-content-between mb-4">
                                <div class="col-auto">
                                    <div class="d-md-flex justify-content-between">
                                        <div> </div>
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="d-flex">
                                        <div class="search-box me-2">
                                            <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                                                <input class="form-control search-input search" type="search" placeholder="Search by name" aria-label="Search" />
                                                <span class="fas fa-search search-box-icon"></span>
                                            </form>
                                        </div>
                                        <a class="btn btn-primary" href="#!" th:href="@{/admin/report}">Back</a> &nbsp;
                                        <button type="button" class="btn btn-primary" onclick="tableToCSV()">
                                            Download CSV
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="px-4 mx-lg-n6 px-lg-6">
                                <div class="table-responsive scrollbar mx-n1 px-1 border-top">
                                    <table class="table table-sm fs--1 mb-0 leads-table">
                                        <thead>
                                            <tr>
                                                <th class="sort white-space-nowrap align-middle text-capitalize" scope="col"  data-sort="email" style="width:auto;">Email</th>
                                                <th class="sort white-space-nowrap align-middle text-capitalize" scope="col" data-sort="name" style="width:auto;">Names</th>
                                                <th class="sort align-middle ps-4 pe-5 text-capitalize border-end" scope="col" data-sort="company" style="width:auto;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-primary-100 rounded me-2">
                                                            <span class="text-primary-600 dark__text-primary-300" data-feather="aperture"></span>
                                                        </div>
                                                        <span>Company</span>
                                                    </div>
                                                </th>
                                                <th class="sort align-middle ps-4 pe-5 text-capitalize border-end"
                                                    scope="col" data-sort="division" style="width:auto;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-warning-100 rounded me-2">
                                                            <span class="text-primary-600 dark__text-warning-300" data-feather="box"></span>
                                                        </div>
                                                        <span>Division</span>
                                                    </div>
                                                </th>
                                                <th class="sort align-middle ps-4 pe-5 text-capitalize border-end"
                                                    scope="col" data-sort="department" style="width:auto;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-primary-100 rounded me-2">
                                                            <span class="text-primary-600 dark__text-primary-300" data-feather="codesandbox"></span>
                                                        </div>
                                                        <span>Department</span>
                                                    </div>
                                                </th>
                                                <th class="sort align-middle pe-5 ps-4" scope="col" data-sort="role"      style="width:auto;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-primary-100 rounded me-2">
                                                            <span class="text-warning-600 dark__text-warning-300" data-feather="file"></span>
                                                        </div>
                                                        <span>Policy Champion</span>
                                                    </div>
                                                </th>
                                                <th class="sort align-middle ps-4 pe-5 text-capitalize border-end"
                                                    scope="col" data-sort="accessLevel" style="width:auto;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-warning-100 rounded me-2">
                                                            <span class="text-primary-600 dark__text-warning-300" data-feather="aperture"></span>
                                                        </div>
                                                        <span>Access Level</span>
                                                    </div>
                                                </th>
                                                <th class="sort align-middle pe-5 ps-4" scope="col" data-sort="dateCreated"   style="width:auto;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-primary-100 rounded me-2">
                                                            <span class="text-warning-600 dark__text-primary-300" data-feather="calendar"></span>
                                                        </div>
                                                        <span>Date Created</span>
                                                    </div>
                                                </th>
                                                <th class="sort align-middle pe-5 ps-4" scope="col" data-sort="role"      style="width:auto;">
                                                    <div class="d-inline-flex flex-center">
                                                        <div class="d-flex align-items-center px-1 py-1 bg-primary-100 rounded me-2">
                                                            <span class="text-warning-600 dark__text-warning-300" data-feather="file"></span>
                                                        </div>
                                                        <span>Role</span>
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody class="list" id="deal-tables-body">
                                            <tr class="hover-actions-trigger btn-reveal-trigger position-static"
                                                th:each="rec : ${userList}">
                                                <td class="email align-middle white-space-nowrap fw-semi-bold text-1000 ps-4 border-end"  th:text="${rec.email}">Email</td>
                                                <td class="username align-middle white-space-nowrap fw-semi-bold text-1000 ps-4 border-end"  th:text="${rec.name}">Name</td>
                                                <td class="company align-middle white-space-nowrap fw-semi-bold text-1000 ps-4 border-end"   th:text="${rec.company.companyName}">Company name</td>
                                                <td class="division align-middle white-space-nowrap fw-semi-bold text-1000 ps-4 border-end" th:text="${rec.division.divisionName}">Division</td>
                                                <td class="department align-middle white-space-nowrap fw-semi-bold text-1000 ps-4 border-end" th:text="${rec.department.departmentName}">Department</td>
                                                <td class="policyChampion align-middle white-space-nowrap fw-semi-bold text-1000 ps-4 border-end" th:text="${rec.policyChampion}">Policy Champion</td>
                                                <td class="accesslevel align-middle white-space-nowrap fw-semi-bold text-1000 ps-4 border-end" th:text="${rec.accessLevel}">Access Level</td>
                                                <td class="datecreated align-middle white-space-nowrap text-600 ps-4 border-end fw-semi-bold text-1000" th:text="${#temporals.format(rec.createdAt,'yyyy-MM-dd')}">Date created</td>
                                                <td class="role align-middle white-space-nowrap text-600 ps-4 border-end fw-semi-bold text-1000" th:text="${rec.role.groupName}">Role</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="row align-items-center justify-content-end py-4 pe-0 fs--1">
                                    <div class="col-auto d-flex">
                                        <p class="mb-0 d-none d-sm-block me-3 fw-semi-bold text-900"
                                           data-list-info="data-list-info"></p>
                                        <a class="fw-semi-bold" href="#!" data-list-view="*">View all
                                            <span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
                                        </a>
                                        <a class="fw-semi-bold d-none" href="#!" data-list-view="less">View Less
                                            <span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
                                        </a>
                                    </div>
                                    <div class="col-auto d-flex">
                                        <button class="page-link" data-list-pagination="prev">
                                            <span class="fas fa-chevron-left"></span>
                                        </button>
                                        <ul class="mb-0 pagination"></ul>
                                        <button class="page-link pe-0" data-list-pagination="next">
                                            <span class="fas fa-chevron-right"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <th:block th:include="~{fragments/entityscFragments :: footer}"></th:block>
                </div>
            </div>               
        </main>
        <th:block th:include="~{fragments/entityscFragments :: scriptfiles}"></th:block> 
    </body>
</html>